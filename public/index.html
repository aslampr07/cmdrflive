<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CMDRF Live Statistics</title>
    <link href="https://unpkg.com/@pqina/flip/dist/flip.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Ubuntu:wght@700&display=swap"
        rel="stylesheet">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-22G05M635B"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-22G05M635B');
    </script>
    <style>
        html {
            font-size: 16px;
            font-family: 'Poppins', sans-serif;
        }

        .root {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            /* height: 80vh; */
        }

        .tick {
            width: 90%;
            font-size: 1rem;
            white-space: nowrap;
            font-family: arial, sans-serif;
            /* visibility: hidden; */
        }

        #tick-wrap {
            visibility: hidden;
        }

        .tick-flip,
        .tick-text-inline {
            font-size: 2.5em;
        }

        .tick-label {
            margin-top: 1em;
            font-size: 1em;
        }

        .tick-char {
            width: 1.5em;
        }

        .tick-text-inline {
            display: inline-block;
            text-align: center;
            min-width: 0.5em;
        }

        .tick-text-inline+.tick-text-inline {
            margin-left: -.325em;
        }

        .tick-group {
            margin: 0 .5em;
            text-align: center;
        }


        .tick-text-inline {
            color: rgb(0, 0, 0) !important;
        }

        .tick-label {
            color: rgb(0, 0, 0) !important;
        }

        .tick-flip-panel {
            color: rgb(253, 255, 247) !important;
        }

        .tick-flip-panel-text-wrapper {
            line-height: 1.45 !important;
        }

        .tick-flip-panel {
            background-color: #00579a !important;
        }

        .tick-flip {
            border-radius: 0.16em !important;
        }

        .hashtag-wrap p {
            font-family: 'Poppins', sans-serif;
            color: #0e024d;
            font-weight: 600;
            margin-bottom: 0px;
            margin-top: 0px;
        }

        .one {
            font-size: 0.875rem
        }

        .two {
            font-size: 1rem
        }

        .three {
            font-size: 1.25rem
        }

        h1 {
            font-weight: 600;
        }

        .logo {
            width: 10rem;
            height: 6rem;
        }

        .top-wrap {
            display: flex;
            justify-content: space-between;
        }

        .source-link {
            margin-top: .5rem;
            text-align: right;
            width: 90%;
        }

        .content-section {
            width: 90%;
        }

        .content-section p {
            color: #0e024d;
        }

        .content-section {
            margin-top: 0px;
        }

        .title h1 {
            font-family: 'Ubuntu', sans-serif;
            text-align: center;
            font-size: 2.5rem;
            font-weight: 700;
        }

        .title {
            margin-top: -2.5rem;
        }

        a {
            color: #00579a;
        }

        .disclaimer {
            border-top: 1px solid #EFF0F1;
            font-size: .8rem;
            position: absolute;
            bottom: 0px;
        }

        .disclaimer p {
            margin-top: 8px;
        }

        .loader {
            text-align: center;
            width: 100%;
        }

        @media only screen and (max-width: 1140px) {
            html {
                font-size: 15px;
            }
        }

        @media only screen and (max-width: 992px) {
            html {
                font-size: 14px;
            }
        }

        @media only screen and (max-width: 768px) {
            html {
                font-size: 12px;
            }
        }

        @media only screen and (max-width: 576px) {
            html {
                font-size: 12px;
            }

            .tick {
                width: 100%;
            }

            .source-link {
                width: 100%;
            }

            .content-section h1 {
                text-align: center;
            }

            .content-section {
                width: 98%;
            }

            .title {
                margin-top: 0rem;
            }

        }
    </style>
</head>

<body>
    <div class="top-wrap">
        <div class="hashtag-wrap">
            <p class="one">#VaccineForAll</p>
            <p class="two"> #VaccinceChallenge</p>
            <p class="three">#StandWithKerala </p>
        </div>
        <div>
            <img class="logo" src="./logo.jpeg" alt="crush the curve">
        </div>
    </div>
    <div class="title">
        <h1>CMDRF LIVE STATISTICS</h1>
    </div>
    <div class="root">
        <div class="content-section">
            <h1>
                What is CMDRF?
            </h1>
            <p>
                Chief Minister’s Distress Relief Fund is an emergency assistance scheme for granting relief to deserving
                families and individuals affected by natural calamities or loss of life of relatives due to accidents or
                for medical treatment for major diseases.
            </p>
        </div>
        <div>
            <h1>Today's Donation</h1>
        </div>
        <div id="loader-wrap" class="loader">
            <img src="./loader.gif" alt=logo />
        </div>
        <div id="tick-wrap" class="tick" data-value="00000000" data-did-init="handleTickInit">

            <div data-value-mapping="indexes" data-layout="horizontal fit"
                data-transform="arrive(.2) -> round -> split -> delay(rtl, 100, 150)">

                <span class="tick-text-inline">₹</span>

                <span data-view="flip">0</span>
                <!--<span class="tick-text-inline">,</span>-->

                <span data-view="flip">0</span>


                <span data-view="flip">0</span>
                <!-- <span class="tick-text-inline">,</span> -->

                <span data-view="flip">0</span>
                <span data-view="flip">0</span>

                <!-- <span class="tick-text-inline">,</span> -->

                <span data-view="flip">0</span>
                <span data-view="flip">0</span>
                <span data-view="flip">0</span>

            </div>

        </div>
        <div class="source-link">
            <span>Source : </span><a href="https://donation.cmdrf.kerala.gov.in/index.php/Dashboard/allType_transaction"
                target="_blank">donation.cmdrf.kerala.gov.in</a>
        </div>
    </div>
    <div class="disclaimer">
        <p>DISCLAIMER: <span style="font-style: italic;">This website is for encouraging donations to CMDRF. Data shown
                in this website may not be realtime. More insight to the data will be available at <a
                    href="https://donation.cmdrf.kerala.gov.in/">CMDRF Website</a>.<span style="font-weight: 600;"> This
                    is not an official website. For more information and donations visit<a
                        href="https://donation.cmdrf.kerala.gov.in/">
                        https://donation.cmdrf.kerala.gov.in/</a></span></span></p>
        <p style="text-align: center;">
            Contact: <a href="mailto:appzonein@gmail.com">appzonein@gmail.com
            </a>
        </p>
    </div>

    <script src="https://unpkg.com/@pqina/flip/dist/flip.min.js"></script>
    <script>
        const loaderItem = document.getElementById("loader-wrap")
        const tickItem = document.getElementById("tick-wrap");
        const socket = new WebSocket("wss://cmdrf.live/websocket", "protocolOne");

        let x = 0;

        socket.onopen = (e) => {
            console.log(e)
        }

        socket.onmessage = (message) => {
            const result = JSON.parse(message.data)
            x = result.todayTotal;
            tickItem.style = "visibility:visible"
            loaderItem.style = "display:none"
        }

        function handleTickInit(tick) {
            tick.value = result.todayTotal;
        }

        socket.onerror = (er) => {
            console.log(er)
        }

        function handleTickInit(tick) {

            Tick.helper.interval(function () {
                tick.value = x;
            }, 1000);

        }

    </script>


</body>

</html>
